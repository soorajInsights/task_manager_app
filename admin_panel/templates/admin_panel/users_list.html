{% extends "admin_panel/base.html" %}
{% block content %}
<h2>Users</h2>

<!-- Button to create a new User -->
{% if request.user.is_superadmin %}
  <a href="{% url 'admin_panel:create_user' %}" class="btn btn-primary mb-3">Create User</a>
{% endif %}


<table class="table table-striped">
  <thead>
    <tr>
      <th>Username</th>
      <th>Email</th>
      <th>Assigned Admin</th>
      <th>Assign</th>
    </tr>
  </thead>
  <tbody>
    {% for user in users %}
    <tr>
      <td>{{ user.username }}</td>
      <td>{{ user.email }}</td>
      <td>
        {% if user.manager %}
          {{ user.manager.username }}
        {% else %}
          -
        {% endif %}
      </td>
      <td>
        <a href="{% url 'admin_panel:assign_user_to_admin' user.id %}" class="btn btn-sm btn-secondary">Assign</a>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="4" class="text-center">No users found.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
